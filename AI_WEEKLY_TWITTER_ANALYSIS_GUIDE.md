# AI 주별 트위터 분석 시스템 가이드

## 📊 개요

AI 주별 트위터 분석 시스템은 Google Gemini를 활용하여 프로젝트의 트위터 활동을 주별로 심층 분석하는 고도화된 기능입니다. 실제 Supabase에 저장된 트윗 데이터를 기반으로 AI가 각 주의 주요 화제, 감정, 트렌드를 자동으로 분석하고 인사이트를 제공합니다.

## ✨ 주요 기능

### 🤖 AI 기반 심층 분석
- **Google Gemini 1.5-flash** 모델을 활용한 정교한 분석
- **한국어 최적화**된 분석 결과
- **블록체인/암호화폐 도메인 특화** 키워드 추출

### 📅 주별 분석 항목
- **주요 화제**: 각 주에서 가장 많이 언급된 키워드와 주제
- **감정 분석**: 긍정/중립/부정적 감정 자동 분류
- **활동 수준**: 트윗 빈도 및 다양성 평가 (높음/보통/낮음)
- **참여도 품질**: 좋아요/리트윗 비율 평가 (우수/좋음/보통/부족)
- **주요 이벤트**: 중요한 발표, 업데이트, 이벤트 자동 식별
- **커뮤니티 인사이트**: 팔로워 반응 패턴 및 참여도 분석
- **AI 권장사항**: 다음 주를 위한 구체적이고 실용적인 제안

### 📈 트렌드 분석
- **최고 활동 주**: 가장 많은 트윗이 올라온 주 식별
- **최고 참여도 주**: 평균 좋아요/리트윗이 가장 높은 주
- **공통 화제**: 전체 기간 동안 자주 언급된 주제들
- **감정 트렌드**: 주별 감정 변화 추이
- **활동도 트렌드**: 주별 활동 수준 변화

### ⭐ 트윗 하이라이트
- **참여도 기반 선별**: 좋아요/리트윗이 많은 트윗 자동 선택
- **대표 트윗 표시**: 각 주의 특징을 잘 보여주는 트윗들
- **참여 이유 분석**: 왜 해당 트윗이 주목받았는지 설명

## 🏗️ 시스템 아키텍처

### 데이터 흐름
```
Supabase twitter_timeline → 주별 데이터 그룹화 → Google Gemini AI 분석 → 결과 캐싱 → UI 표시
```

### 주요 컴포넌트

#### 1. API 엔드포인트
- `/api/twitter-analysis/[projectId]` - 주별 원시 데이터 조회
- `/api/twitter-analysis/[projectId]/ai-weekly` - AI 분석 수행

#### 2. 데이터베이스 테이블
- `twitter_weekly_analysis` - 주별 AI 분석 결과 저장
- `twitter_trend_analysis` - 전체 트렌드 분석 캐시
- `twitter_ai_analysis_logs` - API 사용량 및 성능 로깅

#### 3. 프론트엔드 컴포넌트
- `TwitterDataAnalysis.tsx` - 메인 분석 UI
- 주별 분석 모드와 단순 분석 모드 토글
- 인터랙티브 주별 카드 UI

## 🚀 사용 방법

### 1. 기본 사용법

1. **프로젝트 상세 페이지 접속**
   - 트위터 계정이 연결된 프로젝트 선택

2. **분석 모드 선택**
   - "주별 분석" 탭 클릭 (기본값)
   - 또는 "단순 분석"에서 "주별 분석으로 전환" 버튼 클릭

3. **분석 기간 설정**
   - 4주, 8주, 12주, 16주 중 선택
   - 기본값: 8주

4. **분석 실행**
   - "새로고침" 버튼 클릭
   - 첫 분석 시 약 1-2분 소요
   - 캐시된 결과가 있으면 즉시 로드

### 2. 분석 결과 확인

#### 전체 요약 통계
- 팔로워 수, 분석된 트윗 수, 주평균 트윗, 활동도 점수, 전체 감정

#### 주요 트렌드
- 🎯 주요 화제: 자주 언급된 키워드들
- 🏆 최고 활동 주: 가장 활발했던 주와 통계

#### 주별 상세 분석
- 각 주별 카드 클릭으로 상세 정보 확장
- 좌측: 분석 결과 (화제, 이벤트, 커뮤니티 반응)
- 우측: 통계 및 하이라이트 트윗, AI 권장사항

### 3. 고급 기능

#### 캐싱 시스템
- 한 번 분석된 기간은 자동으로 캐시 저장
- 재분석 시 즉시 로드 (API 호출 없음)
- 성능 최적화 및 비용 절약

#### 로깅 시스템
- 모든 분석 요청이 자동 로깅
- API 사용량, 처리 시간, 성공률 추적
- 성능 모니터링 및 최적화 지원

## ⚙️ 설정 및 관리

### 환경 변수
```env
NEXT_PUBLIC_GEMINI_API_KEY=your_gemini_api_key
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_key
```

### 데이터베이스 설정
1. `TWITTER_WEEKLY_ANALYSIS_SCHEMA.sql` 실행
2. 새로운 테이블 및 인덱스 생성
3. RLS 정책 및 트리거 설정

### API 제한 관리
- **Google Gemini API**: 분당 60회 제한
- **Rate Limiting**: 분석 간 1초 딜레이 적용
- **Batch Processing**: 주별 순차 분석으로 안정성 확보

## 🔧 기술적 세부사항

### AI 프롬프트 엔지니어링
```
다음은 블록체인/암호화폐 프로젝트의 주별 트위터 활동 데이터입니다.

분석 기준:
- main_topics: 트윗에서 자주 언급된 키워드나 주제
- sentiment: 전반적인 톤과 감정
- activity_level: 트윗 빈도와 다양성
- engagement_quality: 좋아요/리트윗 비율
- key_events: 특별한 발표, 업데이트, 이벤트
- community_insights: 팔로워들의 반응 패턴
- recommendations: 실용적이고 구체적인 조언
```

### 성능 최적화
- **GIN 인덱스**: JSONB 데이터 빠른 검색
- **뷰 활용**: 복잡한 쿼리 미리 최적화
- **자동 정리**: 6개월 이상 된 로그 자동 삭제
- **병렬 처리**: 여러 API 호출 최적화

### 오류 처리
- **AI 분석 실패**: 기본 통계 기반 대체 분석 제공
- **API 제한**: Rate limiting 감지 및 대기
- **네트워크 오류**: 자동 재시도 및 사용자 알림
- **데이터 부족**: 적절한 안내 메시지 표시

## 📊 분석 품질 향상

### 데이터 품질
- **충분한 트윗 수**: 주당 최소 2-3개 트윗 권장
- **다양한 콘텐츠**: 리트윗만이 아닌 오리지널 트윗 포함
- **정기적 업데이트**: 최신 트윗 데이터 수집 중요

### AI 분석 정확도
- **도메인 특화**: 블록체인/암호화폐 키워드 최적화
- **문맥 이해**: 프로젝트별 특성 고려
- **한국어 처리**: 한국어 트윗 정확한 분석

## 🚨 주의사항

1. **API 비용**: Google Gemini API 사용량에 따른 비용 발생
2. **분석 시간**: 첫 분석 시 1-2분 소요 (주당 1초 딜레이)
3. **데이터 의존성**: 트위터 스케줄러로 수집된 데이터 필요
4. **캐시 유효성**: 새로운 트윗 수집 후 캐시 무효화 필요

## 🔮 향후 개발 계획

### 단기 (1-2개월)
- 감정 분석 정확도 향상
- 영향력 있는 트윗 식별 알고리즘 개선
- 사용자 커스텀 분석 기간 설정

### 중기 (3-6개월)
- 다국어 지원 확장
- 경쟁사 비교 분석 기능
- 실시간 알림 시스템

### 장기 (6개월+)
- AI 모델 자체 학습 시스템
- 예측 분석 기능
- 자동 보고서 생성

---

## 📞 지원 및 문의

시스템 사용 중 문제가 발생하거나 개선 제안이 있으시면 GitHub Issues를 통해 연락해 주세요.

**개발자**: AI Agent
**버전**: v2.1.0
**최종 업데이트**: 2025-01-28
